<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/assets/images/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Building Survey Management System - Professional Engineering Services"
    />
    <meta name="keywords" content="engineering, construction, architecture, civil engineering, structural engineering" />
    <meta name="author" content="Building Survey Management System" />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />

    <!-- CSS Files -->
    <link rel="stylesheet" href="/assets/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jpreloader.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/animate.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/owl.carousel.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/bg.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/color.css" type="text/css" id="colors">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>Building Survey Management System</title>
  </head>
  <body id="homepage">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- Vite Entry Point - Load React first -->
    <script type="module" src="/src/index.jsx"></script>

    <!-- JavaScript Files -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/jpreLoader.js"></script>
    <script src="/assets/js/wow.min.js"></script>
    <script src="/assets/js/jquery.isotope.min.js"></script>
    <script src="/assets/js/easing.js"></script>
    <script src="/assets/js/owl.carousel.js"></script>
    <script src="/assets/js/validation.js"></script>
    <script src="/assets/js/jquery.magnific-popup.min.js"></script>
    <script src="/assets/js/enquire.min.js"></script>
    <script src="/assets/js/jquery.stellar.min.js"></script>
    <script src="/assets/js/jquery.countTo.js"></script>
    <script src="/assets/js/designesia.js"></script>
    
    <!-- React Router Navigation Fix for Text Slider -->
    <script>
      // Function to re-initialize text slider specifically
      function initializeTextSlider() {
        if (jQuery && jQuery.fn.owlCarousel) {
          jQuery(".text-slider").each(function() {
            var $this = jQuery(this);
            
            // Destroy existing carousel if it exists
            if ($this.hasClass('owl-carousel')) {
              $this.trigger('destroy.owl.carousel');
              $this.removeClass('owl-carousel owl-loaded owl-drag');
              $this.find('.owl-wrapper, .owl-wrapper-outer').children().unwrap();
              $this.removeData();
            }
            
            // Re-initialize with the exact same settings as designesia.js
            $this.owlCarousel({
              items: 1,
              singleItem: true,
              navigation: false,
              pagination: false,
              mouseDrag: false,
              touchDrag: false,
              autoPlay: 2500,
              transitionStyle: "goDown"
            });
          });
        }
        
        // Also re-initialize WOW.js for animations
        if (typeof WOW !== 'undefined') {
          new WOW().init();
        }
      }

      // Initialize on page load (backup for original initialization)
      jQuery(document).ready(function() {
        setTimeout(initializeTextSlider, 500);
      });

      // Re-initialize when React Router navigates
      if (window.MutationObserver) {
        var observer = new MutationObserver(function(mutations) {
          var shouldReinit = false;
          mutations.forEach(function(mutation) {
            if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
              for (var i = 0; i < mutation.addedNodes.length; i++) {
                var node = mutation.addedNodes[i];
                if (node.nodeType === 1) {
                  // Check if the added node contains or is a text-slider
                  if (node.querySelector && (
                    node.querySelector('.text-slider') || 
                    node.classList.contains('text-slider') ||
                    node.querySelector('.wow') ||
                    node.classList.contains('wow')
                  )) {
                    shouldReinit = true;
                    break;
                  }
                }
              }
            }
          });
          
          if (shouldReinit) {
            setTimeout(initializeTextSlider, 300);
          }
        });

        // Start observing the document for changes
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
      
      // Alternative method: Listen for React Router navigation
      if (window.history && window.history.pushState) {
        var originalPushState = window.history.pushState;
        window.history.pushState = function() {
          originalPushState.apply(window.history, arguments);
          setTimeout(initializeTextSlider, 300);
        };
        
        window.addEventListener('popstate', function() {
          setTimeout(initializeTextSlider, 300);
        });
      }
    </script>
  </body>
</html>
